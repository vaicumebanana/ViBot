<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ViBot Ultimate</title>
<style>
  :root {
    --primary: #4f46e5;
    --user-bg: #4f46e5;
    --bot-bg: #f3f4f6;
    --error-bg: #fee2e2;
    --text: #111827;
    --error-text: #dc2626;
    --bg: #f9fafb;
    --copy-bg: #e5e7eb;
    --web-search-bg: #e0f2fe;
    --image-gen-bg: #f0fdf4;
    --translate-bg: #fef2f2;
    --doc-chat-bg: #ecfdf5;
    --reminder-bg: #f5f3ff;
    --code-bg: #eff6ff;
    --calculator-bg: #f0fdf4;
    --news-bg: #fffbeb;
    --poetry-bg: #f5f3ff;
    --plant-bg: #f0fdf4;
    --travel-bg: #eff6ff;
    --nutrition-bg: #f0fdf4;
  }
  [data-theme="dark"] {
    --primary: #6366f1;
    --bg: #1f2937;
    --bot-bg: #374151;
    --text: #f9fafb;
    --user-bg: #6366f1;
    --copy-bg: #4b5563;
    --web-search-bg: #1e3a8a;
    --image-gen-bg: #14532d;
    --translate-bg: #7f1d1d;
    --doc-chat-bg: #064e3b;
    --reminder-bg: #5b21b6;
    --code-bg: #1e3a8a;
    --calculator-bg: #14532d;
    --news-bg: #78350f;
    --poetry-bg: #5b21b6;
    --plant-bg: #064e3b;
    --travel-bg: #1e3a8a;
    --nutrition-bg: #064e3b;
  }

  /* [Manter todos os outros estilos existentes] */

  /* Novos estilos para as funcionalidades */
  .code-block {
    background: var(--code-bg);
    padding: 12px;
    border-radius: 8px;
    font-family: monospace;
    white-space: pre-wrap;
    margin-top: 8px;
  }
  .calculator-result {
    font-size: 24px;
    font-weight: bold;
    text-align: right;
    padding: 10px;
    background: var(--calculator-bg);
    border-radius: 8px;
    margin: 10px 0;
  }
  .calculator-buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
  }
  .calculator-btn {
    padding: 12px;
    font-size: 18px;
    border-radius: 8px;
    border: 1px solid #d1d5db;
    background: white;
    cursor: pointer;
  }
  [data-theme="dark"] .calculator-btn {
    background: #1f2937;
    color: white;
    border-color: #4b5563;
  }
  .news-item {
    padding: 10px;
    margin-bottom: 10px;
    background: var(--news-bg);
    border-radius: 8px;
  }
  .poetry-result {
    font-style: italic;
    white-space: pre-line;
    background: var(--poetry-bg);
    padding: 12px;
    border-radius: 8px;
  }
  .plant-info {
    background: var(--plant-bg);
    padding: 12px;
    border-radius: 8px;
  }
  .travel-guide {
    background: var(--travel-bg);
    padding: 12px;
    border-radius: 8px;
  }
  .nutrition-facts {
    background: var(--nutrition-bg);
    padding: 12px;
    border-radius: 8px;
  }
  .two-columns {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
  }
  @media(max-width: 768px) {
    .two-columns {
      grid-template-columns: 1fr;
    }
  }
</style>
</head>
<body>
<!-- [Manter toda a estrutura HTML anterior] -->

<script>
const ViBot = {
  config: {
    apiUrl: "https://api.groq.com/openai/v1/chat/completions",
    apiKey: "gsk_GAB1Wl5zqbp30qPDeMObWGdyb3FY0g7KiTlGt5aWhUnkD495Bi3T",
    model: "llama3-70b-8192",
    temperature: 0.7,
    maxTokens: 1024,
    systemPrompt: "Voc√™ √© um assistente √∫til chamado ViBot. Responda de forma clara e concisa no idioma do usu√°rio."
  },

  init() {
    // [Manter toda a inicializa√ß√£o anterior]

    // Adicionar eventos para todas as novas ferramentas
    document.getElementById('checkGrammarBtn').onclick = () => this.checkGrammar();
    document.getElementById('analyzeSentimentBtn').onclick = () => this.analyzeSentiment();
    document.getElementById('generateCodeBtn').onclick = () => this.generateCode();
    document.getElementById('generateQRBtn').onclick = () => this.generateQRCode();
    document.getElementById('fetchNewsBtn').onclick = () => this.fetchNews();
    document.getElementById('convertCurrencyBtn').onclick = () => this.convertCurrency();
    document.getElementById('generatePoetryBtn').onclick = () => this.generatePoetry();
    document.getElementById('identifyPlantBtn').onclick = () => this.identifyPlant();
    document.getElementById('startInterviewBtn').onclick = () => this.startInterview();
    document.getElementById('getTravelInfoBtn').onclick = () => this.getTravelInfo();
    document.getElementById('findSynonymsBtn').onclick = () => this.findSynonyms();
    document.getElementById('generateNamesBtn').onclick = () => this.generateNames();
    document.getElementById('calculateNutritionBtn').onclick = () => this.calculateNutrition();
    document.getElementById('startTranscriptionBtn').onclick = () => this.startTranscription();
    document.getElementById('generateExercisesBtn').onclick = () => this.generateExercises();
    document.getElementById('startDebateBtn').onclick = () => this.startDebate();

    // Inicializar calculadora
    this.initCalculator();

    this.userInput.focus();
    setInterval(() => this.checkReminders(), 60000);
  },

  // [Manter todas as fun√ß√µes originais]

  /* ========== NOVAS FUNCIONALIDADES ========== */

  // 1. Busca na Web (j√° implementada)

  // 2. Gera√ß√£o de Imagens (j√° implementada)

  // 3. Tradu√ß√£o (j√° implementada)

  // 4. Resumir Texto
  async summarizeText() {
    const text = document.getElementById('summarizeText').value;
    if (!text) return;
    
    this.addMessage("user", `üìù Texto para resumir:\n${text.substring(0, 100)}...`);
    
    try {
      const summary = await this.callChatAPI(`Resuma o seguinte texto em 3 pontos principais:\n\n${text}`);
      this.addMessage("bot", `üìå Resumo:\n\n${summary}`, 'summarize');
      this.closeModal('summarize');
    } catch (error) {
      this.addMessage("bot", "Erro ao resumir texto. Tente novamente.");
    }
  },

  // 5. Corre√ß√£o Gramatical
  async checkGrammar() {
    const text = document.getElementById('grammarText').value;
    if (!text) return;
    
    this.addMessage("user", `‚úçÔ∏è Texto para corre√ß√£o:\n${text}`);
    
    try {
      const corrected = await this.callChatAPI(`Corrija gramaticalmente o seguinte texto e explique os erros:\n\n${text}`);
      this.addMessage("bot", `‚úÖ Texto corrigido:\n\n${corrected}`, 'grammar');
      this.closeModal('grammar');
    } catch (error) {
      this.addMessage("bot", "Erro na corre√ß√£o gramatical. Tente novamente.");
    }
  },

  // 6. An√°lise de Sentimento
  async analyzeSentiment() {
    const text = document.getElementById('sentimentText').value;
    if (!text) return;
    
    this.addMessage("user", `üòä Texto para an√°lise:\n${text.substring(0, 100)}...`);
    
    try {
      const analysis = await this.callChatAPI(`Analise o sentimento do seguinte texto (positivo, neutro ou negativo) e explique:\n\n${text}`);
      this.addMessage("bot", `üß† An√°lise de Sentimento:\n\n${analysis}`, 'sentiment');
      this.closeModal('sentiment');
    } catch (error) {
      this.addMessage("bot", "Erro na an√°lise de sentimento. Tente novamente.");
    }
  },

  // 7. Gera√ß√£o de C√≥digo
  async generateCode() {
    const prompt = document.getElementById('codePrompt').value;
    const language = document.getElementById('codeLanguage').value;
    if (!prompt) return;
    
    this.addMessage("user", `üíª Gerar c√≥digo ${language}:\n${prompt}`);
    
    try {
      const code = await this.callChatAPI(`Gere c√≥digo ${language} para: ${prompt}\n\nPor favor, inclua coment√°rios explicativos.`);
      this.addMessage("bot", `üñ•Ô∏è C√≥digo ${language}:\n\n<pre class="code-block">${code}</pre>`, 'code-gen');
      this.closeModal('codeGen');
    } catch (error) {
      this.addMessage("bot", "Erro ao gerar c√≥digo. Tente novamente.");
    }
  },

  // 8. Chat com Documentos (j√° implementado)

  // 9. Lembretes (j√° implementado)

  // 10. Calculadora
  initCalculator() {
    const buttons = document.querySelectorAll('.calc-btn');
    const display = document.getElementById('calculatorDisplay');
    
    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        const value = btn.textContent;
        
        if (value === 'C') {
          display.value = '';
        } else if (value === '=') {
          try {
            display.value = eval(display.value);
          } catch {
            display.value = 'Erro';
          }
        } else {
          display.value += value;
        }
      });
    });
  },

  // 11. Gerador QR Code
  generateQRCode() {
    const text = document.getElementById('qrcodeText').value;
    if (!text) return;
    
    this.addMessage("user", `üî≥ Gerar QR Code para:\n${text}`);
    
    // Simula√ß√£o - na pr√°tica usaria uma API como QRServer
    const qrImg = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(text)}`;
    
    this.addMessage("bot", `üî≥ QR Code gerado para "${text}":\n\n<img src="${qrImg}" style="max-width:200px;">`, 'qrcode');
    this.closeModal('qrcode');
  },

  // 12. Not√≠cias
  async fetchNews() {
    const category = document.getElementById('newsCategory').value;
    this.addMessage("user", `üì∞ Not√≠cias sobre: ${category}`);
    
    try {
      // Simula√ß√£o - na pr√°tica usaria uma API como NewsAPI
      const news = [
        { title: "√öltimas not√≠cias sobre tecnologia", source: "Tech News", url: "#" },
        { title: "Novo avan√ßo na intelig√™ncia artificial", source: "AI Journal", url: "#" }
      ];
      
      let newsHtml = '<div class="news-results">';
      news.forEach(item => {
        newsHtml += `
          <div class="news-item">
            <strong>${item.title}</strong><br>
            <small>Fonte: ${item.source}</small>
          </div>
        `;
      });
      newsHtml += '</div>';
      
      this.addMessage("bot", newsHtml, 'news');
      this.closeModal('news');
    } catch (error) {
      this.addMessage("bot", "Erro ao buscar not√≠cias. Tente novamente.");
    }
  },

  // 13. Conversor de Moedas
  async convertCurrency() {
    const amount = parseFloat(document.getElementById('currencyAmount').value);
    const from = document.getElementById('currencyFrom').value;
    const to = document.getElementById('currencyTo').value;
    
    if (!amount) return;
    
    this.addMessage("user", `üí± Converter ${amount} ${from} para ${to}`);
    
    try {
      // Simula√ß√£o - na pr√°tica usaria uma API como ExchangeRate-API
      const rates = { USD: 5.0, BRL: 1.0, EUR: 5.5 };
      const converted = (amount * rates[from] / rates[to]).toFixed(2);
      
      this.addMessage("bot", `üí± ${amount} ${from} = ${converted} ${to}`, 'currency');
      this.closeModal('currency');
    } catch (error) {
      this.addMessage("bot", "Erro na convers√£o. Tente novamente.");
    }
  },

  // 14. Gerador de Poesia
  async generatePoetry() {
    const theme = document.getElementById('poetryTheme').value;
    const style = document.getElementById('poetryStyle').value;
    if (!theme) return;
    
    this.addMessage("user", `‚úíÔ∏è Gerar poesia ${style} sobre: ${theme}`);
    
    try {
      const poetry = await this.callChatAPI(`Escreva um poema no estilo ${style} sobre ${theme}. Use linguagem po√©tica e criativa.`);
      this.addMessage("bot", `‚úíÔ∏è Poesia ${style} sobre ${theme}:\n\n<div class="poetry-result">${poetry}</div>`, 'poetry');
      this.closeModal('poetry');
    } catch (error) {
      this.addMessage("bot", "Erro ao gerar poesia. Tente novamente.");
    }
  },

  // 15. Identificar Planta
  async identifyPlant() {
    const description = document.getElementById('plantDescription').value;
    if (!description) return;
    
    this.addMessage("user", `üåø Identificar planta:\n${description.substring(0, 100)}...`);
    
    try {
      const info = await this.callChatAPI(`Identifique a planta com base nesta descri√ß√£o: ${description}\n\nForne√ßa nome cient√≠fico, caracter√≠sticas e cuidados.`);
      this.addMessage("bot", `üå± Informa√ß√µes sobre a planta:\n\n<div class="plant-info">${info}</div>`, 'plant');
      this.closeModal('plant');
    } catch (error) {
      this.addMessage("bot", "Erro ao identificar planta. Tente novamente.");
    }
  },

  // 16. Simulador de Entrevista
  async startInterview() {
    const type = document.getElementById('interviewType').value;
    this.addMessage("user", `ü§ù Simular entrevista: ${type}`);
    
    try {
      const questions = await this.callChatAPI(`Gere 5 perguntas para uma entrevista de ${type}. Numere cada pergunta.`);
      this.addMessage("bot", `ü§î Perguntas para entrevista de ${type}:\n\n${questions}\n\nResponda cada uma no chat.`, 'interview');
      this.closeModal('interview');
    } catch (error) {
      this.addMessage("bot", "Erro ao gerar perguntas. Tente novamente.");
    }
  },

  // 17. Guia de Viagem
  async getTravelInfo() {
    const destination = document.getElementById('travelDestination').value;
    if (!destination) return;
    
    this.addMessage("user", `‚úàÔ∏è Guia de viagem para: ${destination}`);
    
    try {
      const guide = await this.callChatAPI(`Crie um guia de viagem para ${destination} incluindo:\n1. Melhor √©poca para visitar\n2. Principais atra√ß√µes\n3. Dicas de hospedagem\n4. Cultura local\n5. Dicas de seguran√ßa`);
      this.addMessage("bot", `‚úàÔ∏è Guia de Viagem para ${destination}:\n\n<div class="travel-guide">${guide}</div>`, 'travel');
      this.closeModal('travel');
    } catch (error) {
      this.addMessage("bot", "Erro ao buscar informa√ß√µes. Tente novamente.");
    }
  },

  // 18. Dicion√°rio de Sin√¥nimos
  async findSynonyms() {
    const word = document.getElementById('thesaurusWord').value;
    if (!word) return;
    
    this.addMessage("user", `üìñ Sin√¥nimos para: ${word}`);
    
    try {
      const synonyms = await this.callChatAPI(`Liste 10 sin√¥nimos para "${word}" agrupados por similaridade de significado.`);
      this.addMessage("bot", `üìö Sin√¥nimos para "${word}":\n\n${synonyms}`, 'thesaurus');
      this.closeModal('thesaurus');
    } catch (error) {
      this.addMessage("bot", "Erro ao buscar sin√¥nimos. Tente novamente.");
    }
  },

  // 19. Gerador de Nomes
  async generateNames() {
    const type = document.getElementById('nameType').value;
    this.addMessage("user", `üë∂ Gerar nomes para: ${type}`);
    
    try {
      const names = await this.callChatAPI(`Sugira 10 nomes criativos para ${type}. Inclua breve explica√ß√£o para cada um.`);
      this.addMessage("bot", `‚ú® Nomes sugeridos para ${type}:\n\n${names}`, 'name-gen');
      this.closeModal('nameGen');
    } catch (error) {
      this.addMessage("bot", "Erro ao gerar nomes. Tente novamente.");
    }
  },

  // 20. Calculadora Nutricional
  async calculateNutrition() {
    const foods = document.getElementById('foodItems').value;
    if (!foods) return;
    
    this.addMessage("user", `üçé An√°lise nutricional:\n${foods.substring(0, 100)}...`);
    
    try {
      const analysis = await this.callChatAPI(`Analise o valor nutricional dos seguintes alimentos:\n${foods}\n\nForne√ßa calorias totais, macronutrientes e vitaminas/minerais principais.`);
      this.addMessage("bot", `üçè An√°lise Nutricional:\n\n<div class="nutrition-facts">${analysis}</div>`, 'nutrition');
      this.closeModal('nutrition');
    } catch (error) {
      this.addMessage("bot", "Erro na an√°lise nutricional. Tente novamente.");
    }
  },

  // 21. Transcri√ß√£o de √Åudio
  startTranscription() {
    if (!('webkitSpeechRecognition' in window)) {
      this.addMessage("bot", "Seu navegador n√£o suporta reconhecimento de voz.");
      return;
    }
    
    const recognition = new webkitSpeechRecognition();
    recognition.lang = this.languageSelector.value;
    recognition.interimResults = false;
    
    recognition.onstart = () => {
      document.getElementById('transcriptionResult').textContent = "Ouvindo...";
    };
    
    recognition.onresult = (event) => {
      const transcript = event.results[0][0].transcript;
      document.getElementById('transcriptionResult').textContent = transcript;
      this.addMessage("user", transcript);
      this.closeModal('voiceTranscribe');
    };
    
    recognition.onerror = (event) => {
      this.addMessage("bot", `Erro no reconhecimento: ${event.error}`);
    };
    
    recognition.start();
  },

  // 22. Gerador de Exerc√≠cios
  async generateExercises() {
    const topic = document.getElementById('exerciseTopic').value;
    const level = document.getElementById('exerciseLevel').value;
    if (!topic) return;
    
    this.addMessage("user", `üìö Gerar exerc√≠cios ${level} sobre: ${topic}`);
    
    try {
      const exercises = await this.callChatAPI(`Crie 5 exerc√≠cios de n√≠vel ${level} sobre ${topic}. Inclua respostas separadas.`);
      this.addMessage("bot", `üìù Exerc√≠cios sobre ${topic} (${level}):\n\n${exercises}`, 'exercise');
      this.closeModal('exercise');
    } catch (error) {
      this.addMessage("bot", "Erro ao gerar exerc√≠cios. Tente novamente.");
    }
  },

  // 23. Simulador de Debate
  async startDebate() {
    const topic = document.getElementById('debateTopic').value;
    if (!topic) return;
    
    this.addMessage("user", `üó£Ô∏è Simular debate sobre: ${topic}`);
    
    try {
      const debate = await this.callChatAPI(`Apresente argumentos pr√≥ e contra sobre "${topic}".\n\nEstruture em:\n1. Argumentos a favor\n2. Argumentos contra\n3. Conclus√£o balanceada`);
      this.addMessage("bot", `‚öñÔ∏è Debate sobre "${topic}":\n\n${debate}`, 'debate');
      this.closeModal('debate');
    } catch (error) {
      this.addMessage("bot", "Erro ao gerar debate. Tente novamente.");
    }
  },

  // [Manter todas as outras fun√ß√µes auxiliares]
};

window.onload = () => ViBot.init();
</script>
</body>
</html>
